<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Life Duel Prototype</title>
<style>
body{font-family:sans-serif;text-align:center}
canvas{border:1px solid #555}
#info{margin-top:10px}
button{margin:5px}
</style>
</head>
<body>
<h2>Life Duel – Quick Prototype</h2>
<canvas id="board" width="600" height="600"></canvas>
<div id="info"></div>
<script>
const size=15;
const cellSize=40; // 600/15=40
const canvas=document.getElementById("board");
const ctx=canvas.getContext("2d");
let grid=[];
for(let y=0;y<size;y++){grid[y]=Array(size).fill(0);} //0 empty,1 blue,2 red,3 grey
let currentPlayer=1; //1 blue, 2 red
let placements=0;
let round=0;
const maxRounds=10;

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
for(let y=0;y<size;y++){
 for(let x=0;x<size;x++){
  let v=grid[y][x];
  if(v){
   ctx.fillStyle=v==1?"#1e90ff":v==2?"#ff4d4d":"#cccccc";
   ctx.fillRect(x*cellSize,y*cellSize,cellSize,cellSize);
  }
  ctx.strokeStyle="#888";
  ctx.strokeRect(x*cellSize,y*cellSize,cellSize,cellSize);
 }
}
document.getElementById("info").innerHTML=`Round ${round+1}/${maxRounds} – Player ${currentPlayer==1?"Blue":"Red"} place cell (${placements+1}/3)`;
}

canvas.addEventListener("click",e=>{
if(round>=maxRounds)return;
const rect=canvas.getBoundingClientRect();
const x=Math.floor((e.clientX-rect.left)/cellSize);
const y=Math.floor((e.clientY-rect.top)/cellSize);
if(x<0||x>=size||y<0||y>=size)return;
if(grid[y][x]!=0)return; //occupied
grid[y][x]=currentPlayer==1?1:2;
placements++;
if(placements>=3){
 placements=0;
 if(currentPlayer==1){currentPlayer=2;draw();return;}else{
  currentPlayer=1;
  runGeneration();
  round++;
  if(round>=maxRounds)endGame();
 }
}
draw();
});

function runGeneration(){
let newGrid=[];
for(let y=0;y<size;y++){
 newGrid[y]=Array(size).fill(0);
 for(let x=0;x<size;x++){
  let counts=[0,0,0,0]; // index by cell value
  for(let dy=-1;dy<=1;dy++){
   for(let dx=-1;dx<=1;dx++){
    if(dx==0&&dy==0)continue;
    let nx=x+dx,ny=y+dy;
    if(nx>=0&&ny>=0&&nx<size&&ny<size){
      counts[ grid[ny][nx] ]++;
    }
   }
  }
  let live=counts[1]+counts[2]+counts[3];
  let cell=grid[y][x];
  if(cell!=0){
   if(live==2||live==3){
     newGrid[y][x]=cell; //survives same color
   }
  }else{
   if(live==3){
     let blue=counts[1];
     let red=counts[2];
     if(blue>red)newGrid[y][x]=1;
     else if(red>blue)newGrid[y][x]=2;
     else newGrid[y][x]=3;
   }
  }
 }
}
grid=newGrid;
}

function endGame(){
let blue=0,red=0;
for(let y=0;y<size;y++){
 for(let x=0;x<size;x++){
  if(grid[y][x]==1)blue++;
  else if(grid[y][x]==2)red++;
 }
}
let msg=`Game Over! Blue: ${blue} cells, Red: ${red} cells. ${blue==red?"It's a tie!":blue>red?"Blue wins!":"Red wins!"}`;
document.getElementById("info").innerText=msg;
}

draw();
</script>
</body>
</html>